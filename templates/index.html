<!DOCTYPE html>
<html lang="en" data-theme="{{ 'dark' if session.get('dark_mode') else 'light' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ data.NAME }} | Portfolio</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=Montserrat:wght@700;400&display=swap">
    <link rel="preload" as="style" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" defer></script>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=Montserrat:wght@700;400&family=Poppins:wght@400;600;700&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    <meta name="description" content="Rushabh Singh's portfolio - Turning complex ideas into reliable software.">
    <meta name="keywords" content="Rushabh Singh, Portfolio, Software Developer, Projects, Blog, Python, Flask">
    <meta property="og:title" content="Rushabh Singh | Portfolio">
    <meta property="og:description" content="Turning complex ideas into reliable software.">
    <meta property="og:image" content="{{ url_for('static', filename=data.PROFILE_PIC) }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://portfolio-rushabh.onrender.com/">
    <link rel="canonical" href="https://portfolio-rushabh.onrender.com/">
</head>
<body>
<div id="skeleton-loader">
  <div class="skeleton-navbar"></div>
  <div class="skeleton-hero"></div>
  <div class="skeleton-section"></div>
  <div class="skeleton-section"></div>
  <div class="skeleton-section"></div>
</div>
<div class="bg-blob bg-blob1"></div>
<div class="bg-blob bg-blob2"></div>
<div class="bg-blob bg-blob3"></div>
<nav class="navbar navbar-expand-lg navbar-light fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="#home">{{ data.NAME }}</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
        <li class="nav-item"><a class="nav-link" href="#projects">Projects</a></li>
        <li class="nav-item"><a class="nav-link" href="#achievements">Achievements</a></li>
        <li class="nav-item"><a class="nav-link" href="#github">GitHub</a></li>
        <li class="nav-item"><a class="nav-link" href="#blog">Blog</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Animated Floating Theme Toggle Switch -->
<div class="theme-toggle-switch" id="themeToggleSwitch" title="Toggle Light/Dark Mode" aria-label="Toggle light or dark theme" tabindex="0" role="button">
  <div class="toggle-track">
    <div class="toggle-bg day"></div>
    <div class="toggle-bg night"></div>
    <div class="toggle-thumb">
      <div class="icon sun" aria-label="Light mode">‚òÄÔ∏è</div>
      <div class="icon moon" aria-label="Dark mode">üåô</div>
    </div>
  </div>
</div>

<div style="margin-top: 90px;"></div>

<section id="home" class="hero-card main-card text-center d-flex flex-column align-items-center justify-content-center fade-in" style="background: linear-gradient(120deg, #232526 0%, #414345 100%); color: #fff; box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18);">
  <div class="row w-100 align-items-center flex-column-reverse flex-md-row" style="min-height: 340px;">
    <div class="col-12 col-md-6 d-flex flex-column align-items-center align-items-md-start justify-content-center text-center text-md-start py-3">
      <h1 class="display-3 fw-bold mb-2" style="letter-spacing:2px; color: #fff;">
        Hi, I'm <span style="color:#ff5e62;">{{ data.NAME }}</span>
      </h1>
      <h3 class="fw-semibold mb-3" style="color: #36d1c4;">{{ data.ROLE }}</h3>
      <p class="lead mb-4" style="color: #e0eafc;">{{ data.TAGLINE }}</p>
      <a href="#contact" class="btn btn-lg mt-2 px-4 py-2" style="background: linear-gradient(90deg, #ff5e62 0%, #36d1c4 100%); color: #fff; border: none;">Contact Me</a>
    </div>
    <div class="col-12 col-md-6 d-flex flex-column align-items-center justify-content-center py-3">
      <div style="background: rgba(255,255,255,0.08); border-radius: 50%; box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18); padding: 10px;">
        <img src="{{ url_for('static', filename=data.PROFILE_PIC) }}" class="rounded-circle img-fluid shadow-lg" alt="Profile picture of {{ data.NAME }}">
      </div>
      <div class="mt-3 place-of-study" style="color: #e0eafc; font-size: 1.1rem;">
        <span style="color:#ff5e62; font-weight:600;">Currently studying in:</span> {{ data.PLACE_OF_STUDY }}
      </div>
    </div>
  </div>
</section>

<section id="projects" class="main-card fade-in" style="overflow: visible;">
    <h2 class="mb-4 fw-bold">Projects</h2>
    <div class="project-slider-container position-relative">
        <button class="project-scroll-btn left" aria-label="Scroll left">&#8592;</button>
        <div class="project-slider d-flex flex-row flex-nowrap overflow-auto" tabindex="0">
            {% for project in data.PROJECTS %}
            <div class="card h-100 project-card mx-2 flex-shrink-0 fade-in" style="min-width: 270px; max-width: 320px;">
                <div class="card-body">
                    <h5 class="card-title fw-bold">{{ project.title }}</h5>
                    <p class="card-text">{{ project.description }}</p>
                    <p><span class="badge bg-primary bg-gradient me-1" style="font-size:0.9em;">{{ project.tech|join(', ') }}</span></p>
                </div>
                <div class="card-footer d-flex justify-content-between bg-transparent border-0">
                    <a href="{{ project.github }}" class="btn btn-outline-dark btn-sm" target="_blank">GitHub</a>
                    <a href="{{ project.demo }}" class="btn btn-outline-primary btn-sm" target="_blank">Demo</a>
                    <button class="btn btn-outline-secondary btn-sm project-details-btn" data-title="{{ project.title }}" data-description="{{ project.description }}" data-tech="{{ project.tech|join(', ') }}" data-github="{{ project.github }}" data-demo="{{ project.demo }}">Details</button>
                </div>
            </div>
            {% endfor %}
        </div>
        <button class="project-scroll-btn right" aria-label="Scroll right">&#8594;</button>
    </div>
</section>

<section id="achievements" class="main-card fade-in">
    <h2 class="mb-4 fw-bold">Achievements</h2>
    <div class="achievement-slider-container position-relative">
        <button class="achievement-scroll-btn left" aria-label="Scroll left">&#8592;</button>
        <div class="achievement-slider d-flex flex-row flex-nowrap overflow-auto" tabindex="0">
            {% for ach in data.ACHIEVEMENTS %}
            <div class="card h-100 achievement-card mx-2 flex-shrink-0 fade-in" style="min-width: 270px; max-width: 320px;">
                <div class="card-body d-flex flex-column align-items-center justify-content-center">
                    <h5 class="card-title fw-bold">{{ ach.title }}</h5>
                    <p class="card-text text-center fs-6">{{ ach.details[:60] ~ ('...' if ach.details|length > 60 else '') }}</p>
                </div>
                <div class="card-footer d-flex justify-content-center bg-transparent border-0">
                    <button class="btn btn-outline-secondary btn-sm achievement-details-btn" data-achievement-title="{{ ach.title }}" data-achievement-details="{{ ach.details }}">Details</button>
                </div>
            </div>
            {% endfor %}
        </div>
        <button class="achievement-scroll-btn right" aria-label="Scroll right">&#8594;</button>
    </div>
</section>

<section id="github" class="main-card light-card fade-in">
    <h2 class="mb-4 fw-bold">GitHub Contributions & Activity</h2>
    <div id="github-calendar"></div>
    <div id="github-activity" class="mt-4">
      <h4>Recent Commit Activity</h4>
      <div id="commit-activity">Loading commit activity...</div>
      <h4 class="mt-4">Recently Created Repositories</h4>
      <div id="created-repos">Loading repositories...</div>
    </div>
</section>

<section id="blog" class="main-card fade-in">
    <h2 class="mb-4 fw-bold">Blog</h2>
    <div>
        {% for post in pages %}
        {% if post.meta.published %}
        <div class="mb-3 d-flex align-items-center blog-list-item">
            {% if post.meta.featured_image %}
            <img src="{{ url_for('static', filename=post.meta.featured_image) }}" alt="Featured image for {{ post.meta.title }}" class="blog-featured-img me-3" style="width: 80px; height: 80px; object-fit: cover; border-radius: 12px;">
            {% endif %}
            <div>
            <a href="{{ url_for('blog_post', path=post.path) }}"><strong>{{ post.meta.title }}</strong></a>
                <span class="text-muted ms-2">{{ post.meta.date }}</span>
                <div class="blog-summary text-muted" style="font-size: 0.98em;">
                  {% if post.meta.summary %}
                    {{ post.meta.summary }}
                  {% else %}
                    {{ post.meta.title[:120] ~ ('...' if post.meta.title|length > 120 else '') }}
                  {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <a href="{{ url_for('blog') }}" class="btn btn-outline-secondary mt-2">View All Posts</a>
</section>

<section id="contact" class="main-card fade-in">
    <h2 class="mb-4 fw-bold">Contact</h2>
    <ul class="list-unstyled fs-5">
        <li><strong>Email:</strong> <a href="mailto:{{ data.CONTACT.email }}">{{ data.CONTACT.email }}</a></li>
        <li><strong>Phone:</strong> <a href="tel:{{ data.CONTACT.phone }}">{{ data.CONTACT.phone }}</a></li>
        <li><strong>LinkedIn:</strong> <a href="{{ data.CONTACT.linkedin }}" target="_blank">{{ data.CONTACT.linkedin }}</a></li>
        <li><strong>Instagram:</strong> <a href="{{ data.CONTACT.instagram }}" target="_blank">{{ data.CONTACT.instagram }}</a></li>
    </ul>
    <form action="/contact" method="POST" class="mt-4" id="contactForm">
      <div class="mb-3">
        <input type="text" name="name" class="form-control" placeholder="Your Name" required>
      </div>
      <div class="mb-3">
        <input type="email" name="email" class="form-control" placeholder="Your Email" required>
      </div>
      <div class="mb-3">
        <textarea name="message" class="form-control" rows="4" placeholder="Your Message" required></textarea>
      </div>
      <button type="submit" class="btn btn-outline-primary">Send Message</button>
    </form>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mt-3">
          {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
</section>

<div class="quote-card">I don't just write code , I design solutions that scale, adapt, and empower</div>

<!-- Testimonials Section -->
<section id="testimonials" class="main-card fade-in">
  <h2 class="mb-4 fw-bold">Testimonials</h2>
  <div class="row row-cols-1 row-cols-md-2 g-4">
    <div class="col">
      <div class="card h-100 p-3">
        <div class="card-body">
          <blockquote class="blockquote mb-0">
            <p>Rushabh is a dedicated developer who always delivers quality work on time. Highly recommended!</p>
            <footer class="blockquote-footer mt-2">A. Colleague, <cite title="Company">Tech Co.</cite></footer>
          </blockquote>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card h-100 p-3">
        <div class="card-body">
          <blockquote class="blockquote mb-0">
            <p>It was a pleasure working with Rushabh. His problem-solving skills are top-notch.</p>
            <footer class="blockquote-footer mt-2">B. Professor, <cite title="Institution">Engineering College</cite></footer>
          </blockquote>
        </div>
      </div>
    </div>
  </div>
</section>

<footer class="text-center py-4 mt-5">
    <div class="container">
        <div class="mb-2">
            <a href="{{ data.CONTACT.linkedin }}" class="me-2" target="_blank">LinkedIn</a>
            <a href="{{ data.CONTACT.instagram }}" class="me-2" target="_blank">Instagram</a>
            <a href="mailto:{{ data.CONTACT.email }}" class="me-2">Email</a>
        </div>
        <div>
            &copy; {{ data.NAME }} {{ current_year }}
        </div>
    </div>
</footer>

<!-- Project Details Modal -->
<div class="modal fade" id="projectDetailsModal" tabindex="-1" aria-labelledby="projectDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="projectDetailsModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p id="projectDetailsDescription"></p>
        <p><strong>Tech Stack:</strong> <span id="projectDetailsTech"></span></p>
        <div class="d-flex gap-2 mt-3">
          <a id="projectDetailsGithub" href="#" class="btn btn-outline-dark btn-sm" target="_blank">GitHub</a>
          <a id="projectDetailsDemo" href="#" class="btn btn-outline-primary btn-sm" target="_blank">Demo</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://unpkg.com/github-calendar@latest/dist/github-calendar.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/github-calendar@latest/dist/github-calendar-responsive.css"/>
<script>
    // Smooth scrolling
    document.querySelectorAll('a.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            if(this.hash) {
                e.preventDefault();
                document.querySelector(this.hash).scrollIntoView({ behavior: 'smooth' });
            }
        });
    });
    // GitHub Calendar (always show current year)
    GitHubCalendar("#github-calendar", "rush1618", { responsive: true, summary_text: "", global_stats: false, tooltips: true });
    // 3D Laptop Model (GLB Loader)
    function createLaptop3D() {
        const container = document.getElementById('laptop-3d');
        if (!container) return;
        // Clean up previous content
        container.innerHTML = '';
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, container.offsetWidth/container.offsetHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(container.offsetWidth, container.offsetHeight);
        container.appendChild(renderer.domElement);
        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
        scene.add(ambientLight);
        const pointLight = new THREE.PointLight(0xffffff, 1.2, 20);
        pointLight.position.set(5, 10, 7.5);
        scene.add(pointLight);
        // Load GLB model
        const loaderScript = document.createElement('script');
        loaderScript.src = 'https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js';
        loaderScript.onload = function() {
            const loader = new THREE.GLTFLoader();
            loader.load('/static/models/cyber.glb', function(gltf) {
                const model = gltf.scene;
                model.scale.set(2.2, 2.2, 2.2);
                model.position.y = -0.7;
                scene.add(model);
                // Animate
                function animate() {
                    requestAnimationFrame(animate);
                    model.rotation.y += 0.01;
                    renderer.render(scene, camera);
                }
                animate();
            }, undefined, function(error) {
                console.error('Error loading 3D model:', error);
            });
        };
        document.body.appendChild(loaderScript);
        camera.position.z = 5;
    }
    createLaptop3D();
    // Project slider scroll logic (circular)
    const slider = document.querySelector('.project-slider');
    const leftBtn = document.querySelector('.project-scroll-btn.left');
    const rightBtn = document.querySelector('.project-scroll-btn.right');
    if (slider && leftBtn && rightBtn) {
      leftBtn.onclick = () => {
        if (slider.scrollLeft === 0) {
          slider.scrollLeft = slider.scrollWidth;
        } else {
          slider.scrollBy({left: -320, behavior: 'smooth'});
        }
      };
      rightBtn.onclick = () => {
        if (slider.scrollLeft + slider.offsetWidth >= slider.scrollWidth - 10) {
          slider.scrollLeft = 0;
        } else {
          slider.scrollBy({left: 320, behavior: 'smooth'});
        }
      };
    }
    // Theme toggle logic
    function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
    }
    function getTheme() {
        return localStorage.getItem('theme') || 'dark';
    }
    function updateToggleSwitch(theme) {
        const thumb = document.querySelector('.theme-toggle-switch .toggle-thumb');
        if (theme === 'light') {
            thumb.classList.add('light');
            thumb.classList.remove('dark');
        } else {
            thumb.classList.add('dark');
            thumb.classList.remove('light');
        }
    }
    document.addEventListener('DOMContentLoaded', function() {
        const theme = getTheme();
        setTheme(theme);
        updateToggleSwitch(theme);
        document.getElementById('themeToggleSwitch').onclick = function() {
            const current = getTheme();
            const next = current === 'dark' ? 'light' : 'dark';
            setTheme(next);
            updateToggleSwitch(next);
        };
    });
    // Fade-in animation on scroll
    function fadeInOnScroll() {
        const fadeEls = document.querySelectorAll('.fade-in');
        const trigger = window.innerHeight * 0.92;
        fadeEls.forEach(el => {
            const rect = el.getBoundingClientRect();
            if (rect.top < trigger) {
                el.classList.add('visible');
            }
        });
    }
    window.addEventListener('scroll', fadeInOnScroll);
    window.addEventListener('DOMContentLoaded', fadeInOnScroll);
    // Hide skeleton loader when page is fully loaded
    window.addEventListener('load', function() {
        document.getElementById('skeleton-loader').style.display = 'none';
    });
    // Fetch recent commit activity
    fetch('https://api.github.com/users/rush1618/events/public')
      .then(response => response.json())
      .then(events => {
        // Count commits per repo in the last 30 days
        const now = new Date();
        const days30 = 1000 * 60 * 60 * 24 * 30;
        const repoCommits = {};
        let totalCommits = 0;
        events.forEach(e => {
          if (e.type === 'PushEvent' && (now - new Date(e.created_at) < days30)) {
            const repo = e.repo.name;
            const count = e.payload.commits.length;
            repoCommits[repo] = (repoCommits[repo] || 0) + count;
            totalCommits += count;
          }
        });
        const repoList = Object.entries(repoCommits).map(([repo, count]) =>
          `<li><a href="https://github.com/${repo}" target="_blank">${repo}</a>: <strong>${count}</strong> commit${count > 1 ? 's' : ''}</li>`
        ).join('');
        document.getElementById('commit-activity').innerHTML =
          `<p>Created <strong>${totalCommits}</strong> commit${totalCommits !== 1 ? 's' : ''} in <strong>${Object.keys(repoCommits).length}</strong> repos (last 30 days):</p><ul>${repoList}</ul>`;
      })
      .catch(() => {
        document.getElementById('commit-activity').textContent = 'Could not load commit activity.';
      });
    // Fetch recently created repositories
    fetch('https://api.github.com/users/rush1618/repos?sort=created&direction=desc')
      .then(response => response.json())
      .then(repos => {
        const recentRepos = repos.slice(0, 5).map(repo =>
          `<li><a href="${repo.html_url}" target="_blank">${repo.name}</a> <span class="text-muted">(${repo.created_at.slice(0,10)})</span></li>`
        ).join('');
        document.getElementById('created-repos').innerHTML = `<ul>${recentRepos}</ul>`;
      })
      .catch(() => {
        document.getElementById('created-repos').textContent = 'Could not load repositories.';
      });
    document.querySelectorAll('.project-details-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.getElementById('projectDetailsModalLabel').textContent = this.dataset.title;
        document.getElementById('projectDetailsDescription').textContent = this.dataset.description;
        document.getElementById('projectDetailsTech').textContent = this.dataset.tech;
        document.getElementById('projectDetailsGithub').href = this.dataset.github;
        document.getElementById('projectDetailsDemo').href = this.dataset.demo;
        var modal = new bootstrap.Modal(document.getElementById('projectDetailsModal'));
        modal.show();
      });
    });
    // Achievement slider scroll logic (circular)
    const achievementSlider = document.querySelector('.achievement-slider');
    const achievementLeftBtn = document.querySelector('.achievement-scroll-btn.left');
    const achievementRightBtn = document.querySelector('.achievement-scroll-btn.right');
    if (achievementSlider && achievementLeftBtn && achievementRightBtn) {
      achievementLeftBtn.onclick = () => {
        if (achievementSlider.scrollLeft === 0) {
          achievementSlider.scrollLeft = achievementSlider.scrollWidth;
        } else {
          achievementSlider.scrollBy({left: -320, behavior: 'smooth'});
        }
      };
      achievementRightBtn.onclick = () => {
        if (achievementSlider.scrollLeft + achievementSlider.offsetWidth >= achievementSlider.scrollWidth - 10) {
          achievementSlider.scrollLeft = 0;
        } else {
          achievementSlider.scrollBy({left: 320, behavior: 'smooth'});
        }
      };
    }
    // Achievement details modal logic
    const achievementDetailsBtns = document.querySelectorAll('.achievement-details-btn');
    achievementDetailsBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        document.getElementById('projectDetailsModalLabel').textContent = this.dataset.achievementTitle;
        document.getElementById('projectDetailsDescription').textContent = this.dataset.achievementDetails;
        document.getElementById('projectDetailsTech').textContent = '';
        document.getElementById('projectDetailsGithub').style.display = 'none';
        document.getElementById('projectDetailsDemo').style.display = 'none';
        var modal = new bootstrap.Modal(document.getElementById('projectDetailsModal'));
        modal.show();
        // Restore buttons after modal closes
        document.getElementById('projectDetailsModal').addEventListener('hidden.bs.modal', function() {
          document.getElementById('projectDetailsGithub').style.display = '';
          document.getElementById('projectDetailsDemo').style.display = '';
        }, { once: true });
      });
    });
</script>

<!-- Google Analytics (replace G-XXXXXXXXXX with your own ID) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XXXXXXXXXX');
</script>
</body>
</html> 